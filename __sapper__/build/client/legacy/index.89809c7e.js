import{_ as t,a as e,b as n,c as a,i as r,d as s,w as c,S as i,e as u,r as o,s as l,g as f,t as p,f as h,k as v,l as d,m,j as y,h as x,p as g,u as _,x as b,q as k,n as w,y as C,z as E,A as S,B as T,C as j,D as O,v as N,E as R,F as P,G as I}from"./client.aa630d7a.js";function $(t){var a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,s=e(t);if(a){var c=e(this).constructor;r=Reflect.construct(s,arguments,c)}else r=s.apply(this,arguments);return n(this,r)}}function B(t,e,n){var a=t.slice();return a[8]=e[n],a}function F(t){var e,n,a,r,s=t[8].name+"";return{c:function(){e=f("option"),n=p(s),a=h(),this.h()},l:function(t){e=v(t,"OPTION",{});var r=d(e);n=m(r,s),a=y(r),r.forEach(x),this.h()},h:function(){e.__value=r=t[8]._id,e.value=e.__value},m:function(t,r){g(t,e,r),_(e,n),_(e,a)},p:function(t,a){4&a&&s!==(s=t[8].name+"")&&b(n,s),4&a&&r!==(r=t[8]._id)&&(e.__value=r,e.value=e.__value)},d:function(t){t&&x(e)}}}function U(t){for(var e,n,a,r,s,c,i,u,o,l,b,I,$,U,q=t[2],z=[],A=0;A<q.length;A+=1)z[A]=F(B(t,q,A));return{c:function(){e=h(),n=f("h1"),a=p("Create Certificate!"),r=h(),s=f("form"),c=f("select"),i=f("option"),u=p("Select Template");for(var t=0;t<z.length;t+=1)z[t].c();o=h(),l=f("input"),b=h(),I=f("input"),this.h()},l:function(t){k('[data-svelte="svelte-oh6yg0"]',document.head).forEach(x),e=y(t),n=v(t,"H1",{class:!0});var f=d(n);a=m(f,"Create Certificate!"),f.forEach(x),r=y(t),s=v(t,"FORM",{});var p=d(s);c=v(p,"SELECT",{class:!0});var h=d(c);i=v(h,"OPTION",{});var g=d(i);u=m(g,"Select Template"),g.forEach(x);for(var _=0;_<z.length;_+=1)z[_].l(h);h.forEach(x),o=y(p),l=v(p,"INPUT",{class:!0,type:!0,placeholder:!0}),b=y(p),I=v(p,"INPUT",{class:!0,type:!0}),p.forEach(x),this.h()},h:function(){document.title="Sapper project template",w(n,"class","svelte-1kk9opm"),i.__value="0",i.value=i.__value,w(c,"class","w3-input"),void 0===t[1]&&C((function(){return t[6].call(c)})),w(l,"class","w3-input"),w(l,"type","text"),w(l,"placeholder","Name on the Certificate"),w(I,"class","w3-button w3-round w3-border"),w(I,"type","submit"),I.value="Create Certificate"},m:function(f,p){g(f,e,p),g(f,n,p),_(n,a),g(f,r,p),g(f,s,p),_(s,c),_(c,i),_(i,u);for(var h=0;h<z.length;h+=1)z[h].m(c,null);E(c,t[1]),_(s,o),_(s,l),S(l,t[0]),_(s,b),_(s,I),$||(U=[T(c,"change",t[6]),T(l,"input",t[7]),T(s,"submit",j(t[3]))],$=!0)},p:function(t,e){var n=O(e,1)[0];if(4&n){var a;for(q=t[2],a=0;a<q.length;a+=1){var r=B(t,q,a);z[a]?z[a].p(r,n):(z[a]=F(r),z[a].c(),z[a].m(c,null))}for(;a<z.length;a+=1)z[a].d(1);z.length=q.length}6&n&&E(c,t[1]),1&n&&l.value!==t[0]&&S(l,t[0])},i:N,o:N,d:function(t){t&&x(e),t&&x(n),t&&x(r),t&&x(s),R(z,t),$=!1,P(U)}}}var q=function(){var t=u(o.mark((function t(e,n){var a,r,s,c;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.user){t.next=3;break}return t.abrupt("return",this.redirect(301,"login"));case 3:return t.next=5,this.fetch("templates.json",{mode:"cors",method:"get"});case 5:if(200!=(s=t.sent).status){t.next=11;break}return t.next=9,s.json();case 9:"success"==(c=t.sent).status?r=c.data:this.error(c.status,c.message);case 11:return t.abrupt("return",{user:a,templates:r});case 12:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}();function z(t,e,n){var a=e.name,r=e.description,s=e.selected,c=void 0===s?0:s,i=e.user,l=e.templates;function f(){return(f=u(o.mark((function t(){var e,n;return o.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||0==c){t.next=12;break}return t.next=3,fetch("create_certificate.json",{mode:"cors",method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,template_id:c})});case 3:if(200!=(e=t.sent).status){t.next=8;break}location.href="/certificates",t.next=12;break;case 8:return t.next=10,e.text();case 10:n=t.sent,console.log(n);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return t.$$set=function(t){"name"in t&&n(0,a=t.name),"description"in t&&n(4,r=t.description),"selected"in t&&n(1,c=t.selected),"user"in t&&n(5,i=t.user),"templates"in t&&n(2,l=t.templates)},[a,c,l,function(){return f.apply(this,arguments)},r,i,function(){c=I(this),n(1,c),n(2,l)},function(){a=this.value,n(0,a)}]}var A=function(e){t(u,i);var n=$(u);function u(t){var e;return a(this,u),e=n.call(this),r(s(e),t,z,U,l,{name:0,description:4,selected:1,user:5,templates:2,handleSubmit:3}),e}return c(u,[{key:"handleSubmit",get:function(){return this.$$.ctx[3]}}]),u}();export default A;export{q as preload};
