import{K as e,_ as t,a,b as r,c as n,i as s,d as o,w as c,S as i,e as u,r as l,s as f,f as h,g as p,t as d,q as m,h as v,j as y,k as x,l as g,m as w,n as b,p as k,u as R,A as S,B as E,C as j,D as N,v as P,F as A}from"./client.aa630d7a.js";import{A as L}from"./static_store.3e9268b3.js";function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=a(e);if(t){var o=a(this).constructor;n=Reflect.construct(s,arguments,o)}else n=s.apply(this,arguments);return r(this,n)}}function T(e){var t,a,r,n,s,o,c,i,u,l,f,L,O,T,$,q,B,F,I,U,C,H,J;return{c:function(){t=h(),a=p("h1"),r=d("Seminar"),n=h(),s=p("h2"),o=d("Login"),c=h(),i=p("form"),u=p("input"),l=h(),f=p("input"),L=h(),O=p("input"),T=h(),$=p("a"),q=d("Register new user"),B=h(),F=p("p"),I=d("created by: "),U=p("a"),C=d("neoned71"),this.h()},l:function(e){m('[data-svelte="svelte-wr3kpp"]',document.head).forEach(v),t=y(e),a=x(e,"H1",{class:!0});var h=g(a);r=w(h,"Seminar"),h.forEach(v),n=y(e),s=x(e,"H2",{});var p=g(s);o=w(p,"Login"),p.forEach(v),c=y(e),i=x(e,"FORM",{});var d=g(i);u=x(d,"INPUT",{type:!0,name:!0,placeholder:!0}),l=y(d),f=x(d,"INPUT",{type:!0,name:!0,placeholder:!0}),L=y(d),O=x(d,"INPUT",{type:!0}),d.forEach(v),T=y(e),$=x(e,"A",{href:!0});var b=g($);q=w(b,"Register new user"),b.forEach(v),B=y(e),F=x(e,"P",{class:!0});var k=g(F);I=w(k,"created by: "),U=x(k,"A",{href:!0});var R=g(U);C=w(R,"neoned71"),R.forEach(v),k.forEach(v),this.h()},h:function(){document.title="Seminar",b(a,"class","svelte-1tqvmh4"),b(u,"type","text"),b(u,"name","email"),b(u,"placeholder","email"),b(f,"type","password"),b(f,"name","password"),b(f,"placeholder","password"),b(O,"type","submit"),O.value="Login",b($,"href","/register"),b(U,"href","https://neoned71.com"),b(F,"class","svelte-1tqvmh4")},m:function(h,p){k(h,t,p),k(h,a,p),R(a,r),k(h,n,p),k(h,s,p),R(s,o),k(h,c,p),k(h,i,p),R(i,u),S(u,e[0]),R(i,l),R(i,f),S(f,e[1]),R(i,L),R(i,O),k(h,T,p),k(h,$,p),R($,q),k(h,B,p),k(h,F,p),R(F,I),R(F,U),R(U,C),H||(J=[E(u,"input",e[4]),E(f,"input",e[5]),E(i,"submit",j(e[2]))],H=!0)},p:function(e,t){var a=N(t,1)[0];1&a&&u.value!==e[0]&&S(u,e[0]),2&a&&f.value!==e[1]&&S(f,e[1])},i:P,o:P,d:function(e){e&&v(t),e&&v(a),e&&v(n),e&&v(s),e&&v(c),e&&v(i),e&&v(T),e&&v($),e&&v(B),e&&v(F),H=!1,A(J)}}}console.log("hello");var $=e(L),q=function(){var e=u(l.mark((function e(t,a){var r,n;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch($+"/auth/whoami",{mode:"cors",method:"get"});case 2:if(200!=(r=e.sent).status){e.next=15;break}return e.prev=4,e.next=7,r.json();case 7:n=e.sent,console.log(n),"success"==n.status&&this.redirect(301,"/dashboard"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[4,12]])})));return function(t,a){return e.apply(this,arguments)}}();function B(e,t,a){var r=t.email,n=t.password,s=t.user;function o(){return(o=u(l.mark((function e(){var t,o;return l.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!n){e.next=16;break}return e.next=3,fetch($+"/auth/login",{mode:"cors",method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:n})});case 3:if(200!=(t=e.sent).status){e.next=14;break}return e.next=7,t.text();case 7:o=e.sent,o=JSON.parse(o),a(3,s=o.user),console.log(s),location.href="/dashboard",e.next=16;break;case 14:alert("Login Failed"),console.log(t.text());case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return e.$$set=function(e){"email"in e&&a(0,r=e.email),"password"in e&&a(1,n=e.password),"user"in e&&a(3,s=e.user)},[r,n,function(){return o.apply(this,arguments)},s,function(){r=this.value,a(0,r)},function(){n=this.value,a(1,n)}]}var F=function(e){t(r,i);var a=O(r);function r(e){var t;return n(this,r),t=a.call(this),s(o(t),e,B,T,f,{email:0,password:1,user:3,handleSubmit:2}),t}return c(r,[{key:"handleSubmit",get:function(){return this.$$.ctx[2]}}]),r}();export default F;export{q as preload};
