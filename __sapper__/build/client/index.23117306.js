import{S as e,i as t,s as a,e as s,t as n,a as l,b as i,f as c,g as r,c as o,d as u,k as h,l as p,m as f,q as m,h as d,o as v,p as g,r as _,u as y,v as w,n as C,w as b,x as E,y as S}from"./client.c7e34c6f.js";function T(e,t,a){const s=e.slice();return s[8]=t[a],s}function x(e){let t,a,m,d,v=e[8].name+"";return{c(){t=s("option"),a=n(v),m=l(),this.h()},l(e){t=i(e,"OPTION",{});var s=c(t);a=r(s,v),m=o(s),s.forEach(u),this.h()},h(){t.__value=d=e[8]._id,t.value=t.__value},m(e,s){h(e,t,s),p(t,a),p(t,m)},p(e,s){4&s&&v!==(v=e[8].name+"")&&f(a,v),4&s&&d!==(d=e[8]._id)&&(t.__value=d,t.value=t.__value)},d(e){e&&u(t)}}}function j(e){let t,a,f,S,j,N,O,I,P,$,k,U,q,F,H=e[2],J=[];for(let t=0;t<H.length;t+=1)J[t]=x(T(e,H,t));return{c(){t=l(),a=s("h1"),f=n("Create Certificate!"),S=l(),j=s("form"),N=s("select"),O=s("option"),I=n("Select Template");for(let e=0;e<J.length;e+=1)J[e].c();P=l(),$=s("input"),k=l(),U=s("input"),this.h()},l(e){m('[data-svelte="svelte-oh6yg0"]',document.head).forEach(u),t=o(e),a=i(e,"H1",{class:!0});var s=c(a);f=r(s,"Create Certificate!"),s.forEach(u),S=o(e),j=i(e,"FORM",{});var n=c(j);N=i(n,"SELECT",{class:!0});var l=c(N);O=i(l,"OPTION",{});var h=c(O);I=r(h,"Select Template"),h.forEach(u);for(let e=0;e<J.length;e+=1)J[e].l(l);l.forEach(u),P=o(n),$=i(n,"INPUT",{class:!0,type:!0,placeholder:!0}),k=o(n),U=i(n,"INPUT",{class:!0,type:!0}),n.forEach(u),this.h()},h(){document.title="Sapper project template",d(a,"class","svelte-1kk9opm"),O.__value="0",O.value=O.__value,d(N,"class","w3-input"),void 0===e[1]&&v((()=>e[6].call(N))),d($,"class","w3-input"),d($,"type","text"),d($,"placeholder","Name on the Certificate"),d(U,"class","w3-button w3-round w3-border"),d(U,"type","submit"),U.value="Create Certificate"},m(s,n){h(s,t,n),h(s,a,n),p(a,f),h(s,S,n),h(s,j,n),p(j,N),p(N,O),p(O,I);for(let e=0;e<J.length;e+=1)J[e].m(N,null);g(N,e[1]),p(j,P),p(j,$),_($,e[0]),p(j,k),p(j,U),q||(F=[y(N,"change",e[6]),y($,"input",e[7]),y(j,"submit",w(e[3]))],q=!0)},p(e,[t]){if(4&t){let a;for(H=e[2],a=0;a<H.length;a+=1){const s=T(e,H,a);J[a]?J[a].p(s,t):(J[a]=x(s),J[a].c(),J[a].m(N,null))}for(;a<J.length;a+=1)J[a].d(1);J.length=H.length}6&t&&g(N,e[1]),1&t&&$.value!==e[0]&&_($,e[0])},i:C,o:C,d(e){e&&u(t),e&&u(a),e&&u(S),e&&u(j),b(J,e),q=!1,E(F)}}}const N=async function(e,t){var a,{user:s}=t;if(!s)return this.redirect(301,"login");const n=await this.fetch("templates.json",{mode:"cors",method:"get"});if(200==n.status){var l=await n.json();"success"==l.status?a=l.data:this.error(l.status,l.message)}return{user:s,templates:a}};function O(e,t,a){let{name:s}=t,{description:n}=t,{selected:l=0}=t,{user:i}=t,{templates:c}=t;return e.$$set=e=>{"name"in e&&a(0,s=e.name),"description"in e&&a(4,n=e.description),"selected"in e&&a(1,l=e.selected),"user"in e&&a(5,i=e.user),"templates"in e&&a(2,c=e.templates)},[s,l,c,async function(){if(s&&0!=l){const e=await fetch("create_certificate.json",{mode:"cors",method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,template_id:l})});if(200==e.status)location.href="/certificates";else{let t=await e.text();console.log(t)}}},n,i,function(){l=S(this),a(1,l),a(2,c)},function(){s=this.value,a(0,s)}]}export default class extends e{constructor(e){super(),t(this,e,O,j,a,{name:0,description:4,selected:1,user:5,templates:2,handleSubmit:3})}get handleSubmit(){return this.$$.ctx[3]}}export{N as preload};
